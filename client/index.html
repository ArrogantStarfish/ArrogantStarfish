<!DOCTYPE html>
<html>
<head>
<!-- <meta name="viewport" content="width=device-width"> -->
<!-- Client Dependencies -->
  <!-- Change this to fit the actual source file names -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.3/backbone-min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
<script type="text/javascript" src="lib/jquery-ui/jquery-ui.min.js"></script>

<!-- Backbone Models -->
<script type="text/javascript" src="src/models/CountryModel.js"></script>
<script type="text/javascript" src="src/models/AppModel.js"></script>
<script type="text/javascript" src="src/models/MapModel.js"></script>
<script type="text/javascript" src="src/models/NewsModel.js"></script>
<!-- Backbone Collections -->
<script type="text/javascript" src="src/models/CountryCollection.js"></script>
<!-- Backbone Views -->
<script type="text/javascript" src="src/views/AppView.js"></script>
<script type="text/javascript" src="src/views/CountryView.js"></script>
<script type="text/javascript" src="src/views/MapView.js"></script>
<script type="text/javascript" src="src/views/ButtonView.js"></script>

<!-- Stylesheets -->
<!-- <link href='https://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'> -->
<!-- <link href='https://fonts.googleapis.com/css?family=Philosopher:400,700italic,700,400italic' rel='stylesheet' type='text/css'> -->
<link href='https://fonts.googleapis.com/css?family=Montserrat+Subrayada:400,700' rel='stylesheet' type='text/css'>
<link href="lib/jquery-ui/themes/smoothness/jquery-ui.min.css" rel="stylesheet" type="text/css">
<link href="src/styles.css" rel="stylesheet" type="text/css">
<link rel="shortcut icon" href="src/img/favicon.ico">

<title>WE CARE</title>
</head>
<body>
<script>
  // Runs when page is loaded
  $(function() {
    var app = new AppModel();
    var appView = new AppView({model:app});

    var $title = $('.title');
    var $heart = $('img.heart');
    var $line = $('.title-line');

    var $titleOriginalSize; //parseFloat($title.css('width'));
    var $titleOriginalFont = parseInt($title.css('font-size'));
    var $heartOriginalSize = parseInt($heart.css('width'));

    var showMapLogo = true;
    //var $heartOriginalLeft = parseInt($heart.css('left'));
    //var $heartOriginalTop = parseInt($heart.css('top'));

    $(window).scroll(function() {
      //console.log('test', data);
      $titleOriginalSize = 692//$titleOriginalSize || parseFloat($title.css('width'));
      var scroll = $(this).scrollTop();
      //console.log(scroll);
      var updateTitleSize = $titleOriginalFont - scroll; 
      var newHeartWidth = ($heartOriginalSize * updateTitleSize) / $titleOriginalFont;
      var updateHeartSize = newHeartWidth / $heartOriginalSize;
      //var updateHeartLeft = (($heartOriginalSize * updateHeartSize) - $heartOriginalSize);
      //var titleWidth = parseInt($title.css('width'));
      //var updateHeartLeft = 255 - (titleWidth * 255 / $titleOriginalSize);
      // console.log('originalLeft', $heartOriginalLeft)
      // console.log('titleWidth', titleWidth);
      // console.log('OriginalSize', $titleOriginalSize);
      //var updateHeartTop = $heartOriginalTop - scroll;

      if (updateTitleSize >= 30) {
        //console.log($titleOriginalFont, updateHeartLeft);
        $title.css('font-size', updateTitleSize);
        $heart.css('transform', 'scale3d(' + updateHeartSize + ', ' + updateHeartSize + ', 1)');
        $line.css('transform', 'scale3d(' + updateHeartSize + ', ' + updateHeartSize + ', 1)');
        //$heart.css('transform', 'translate3d(' + updateHeartLeft + ', ' + updateHeartTop + ', 1)');
      }
      if (showMapLogo && scroll >= 110 && $title.css('opacity') !== 0) {
        showMapLogo = false;
        $title.animate({opacity: 0}, 150);
        $('.logo-map-small').animate({opacity: 1}, 300);
      }
      // console.log($title.css('opacity'))
      if (!showMapLogo && scroll < 100 && $title.css('opacity') === '0') {
        showMapLogo = true;
        $('.logo-map-small').animate({opacity: 0}, 200);
        $title.animate({opacity: 1}, 200);
      }
    });
  });
</script>
</body>
</html>
